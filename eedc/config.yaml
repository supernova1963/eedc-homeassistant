# Home Assistant Add-on Konfiguration
# https://developers.home-assistant.io/docs/add-ons/configuration

name: "eedc - Energie Effizienz Data Center"
description: "Lokale PV-Anlagen Auswertung und Wirtschaftlichkeitsanalyse"
version: "2.5.1"
slug: "eedc"
url: "https://github.com/supernova1963/eedc-homeassistant"

# Breaking Change Warnung für v2.0.0
# Erfordert Neuinstallation wegen geändertem Volume-Mapping (config:ro)
breaking_versions:
  - "2.0.0"

# Unterstützte Architekturen
arch:
  - aarch64
  - amd64
  - armv7

# Container-Einstellungen
init: false
startup: application
boot: auto

# Home Assistant Integration
homeassistant_api: true
hassio_api: true

# Ingress (nahtlose UI-Integration)
ingress: true
ingress_port: 8099
ingress_stream: true
panel_icon: "mdi:solar-power"
panel_title: "eedc"

# Benutzer-Optionen
options:
  log_level: info
  mqtt:
    enabled: false
    host: "core-mosquitto"
    port: 1883
    username: ""
    password: ""
    auto_publish: false
    publish_interval_minutes: 60

schema:
  log_level: list(debug|info|warning|error)
  mqtt:
    enabled: bool?
    host: str?
    port: int(1,65535)?
    username: str?
    password: password?
    auto_publish: bool?
    publish_interval_minutes: int(5,1440)?

# Persistenter Speicher
map:
  - data:rw
  - config:ro  # Lesezugriff auf HA-Config für statistics Datenbank-Abfrage

# Netzwerk (nur intern via Ingress)
ports:
  8099/tcp: null

# Lokaler Build (kein vorgebautes Image)
# Wenn ein Image auf ghcr.io veröffentlicht ist, diese Zeile einkommentieren:
# image: "ghcr.io/supernova1963/eedc-{arch}"
